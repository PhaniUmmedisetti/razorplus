<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - RazorPlus Docs</title>
    <link rel="stylesheet" href="~/_content/RazorPlus/css/razorplus.css" />
    <style>
        body { margin: 0; }
        .docs-shell { max-width: 960px; margin: 0 auto; padding: 24px 16px 64px; }
        .docs-header { border-bottom: 1px solid #e5e7eb; padding: 16px 0; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; }
        [data-theme="dark"] .docs-header { border-color: #374151; }
        .docs-header__brand { font-size: 1.25rem; font-weight: 700; text-decoration: none; color: inherit; }
        .docs-footer { border-top: 1px solid #e5e7eb; padding: 24px 0; margin-top: 48px; font-size: .9rem; color: var(--rp-muted); }
        [data-theme="dark"] .docs-footer { border-color: #374151; }
        main > section { margin-bottom: 40px; }
        main > section > h2 { margin-bottom: 12px; }
        .docs-grid { display: grid; gap: 16px; align-items: flex-start; }
        @@media (min-width: 768px) {
            .docs-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        pre { background: rgba(15,23,42,0.08); padding: 12px; border-radius: 8px; font-size: .9rem; overflow: auto; }
        [data-theme="dark"] pre { background: rgba(148,163,184,0.12); }
    </style>
</head>
<body>
    <div class="docs-shell">
        <header class="docs-header">
            <a class="docs-header__brand" asp-area="" asp-page="/Index">RazorPlus Docs</a>
            <button type="button" class="rp-btn rp-btn--ghost rp-btn--sm" id="theme-toggle">Dark mode</button>
        </header>

        <main role="main">
            @RenderBody()
        </main>

        <footer class="docs-footer">
            &copy; @DateTime.UtcNow.Year RazorPlus Docs
        </footer>
    </div>

    <script type="module" src="~/_content/RazorPlus/js/razorplus.core.js"></script>
    <script type="module">
        const root = document.documentElement;
        const key = 'razorplus-docs-theme';
        const toggle = document.getElementById('theme-toggle');
        const apply = (theme, persist = true) => {
            root.setAttribute('data-theme', theme);
            if (toggle) {
                toggle.textContent = theme === 'dark' ? 'Light mode' : 'Dark mode';
                toggle.setAttribute('aria-pressed', theme === 'dark' ? 'true' : 'false');
            }
            if (persist) {
                localStorage.setItem(key, theme);
            }
        };
        const saved = localStorage.getItem(key);
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const initial = saved === 'dark' ? 'dark' : saved === 'light' ? 'light' : (prefersDark ? 'dark' : 'light');
        apply(initial, false);
        if (toggle) {
            toggle.addEventListener('click', () => {
                const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                apply(next);
            });
        }
        if (window.matchMedia) {
            const media = window.matchMedia('(prefers-color-scheme: dark)');
            media.addEventListener('change', (event) => {
                const current = localStorage.getItem(key);
                if (!current) {
                    apply(event.matches ? 'dark' : 'light', false);
                }
            });
        }
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
